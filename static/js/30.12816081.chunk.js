(this.webpackJsonpdemoapp2p=this.webpackJsonpdemoapp2p||[]).push([[30],{1058:function(e,t,n){var a={"./ErrorBoundary":[127],"./ErrorBoundary.tsx":[127],"./FileUtility":[1048,5],"./FileUtility.tsx":[1048,5],"./Followers":[1049,6],"./Followers.tsx":[1049,6],"./Pulse":[1036,1,7],"./Pulse.tsx":[1036,1,7],"./RelatedCases":[1050,8],"./RelatedCases.tsx":[1050,8],"./Stakeholders":[1051,2,9],"./Stakeholders.tsx":[1051,2,9],"./Tags":[1052,3,10],"./Tags.tsx":[1052,3,10],"./Worklist":[1034,11],"./Worklist.tsx":[1034,11]};function c(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],c=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(c)}))}c.keys=function(){return Object.keys(a)},c.id=1058,e.exports=c},1082:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var a=n(14),c=n(3),r=n(13),i=n(5),s=n(0),o=n(15),u=n(1057),l=n(57),f=n(124),b=n(215),d=n(228),j=n(33),g=n(122),p=n(19),O=n(1063),m=n(1080),v=n(1079),h=n(1083),y=n(49),x=n(72),S=n(132),T=n(131),C=n(127),I=function(e){return"0".concat(e).slice(-2)},k=function(e,t,n,a,c){if("string"===typeof t){if(a){var r=function(e,t){if("string"!==typeof t)return null;var n=e,a=t.split(".");for(var c in a){var r=a[c],i=r.indexOf("(");if(-1===i){if("undefined"===typeof n[r])return null;n=n[r]}else{var s=parseInt(r.substring(i+1,r.length-1),10),o=n[r.substring(0,i)];if(!(o&&Array.isArray(o)&&o.length>=s))return null;n=o[s-1]}}return n}(a,t);if(r===c||"".concat(r)==="".concat(c)||null===r&&""===c)return}var i=t.lastIndexOf(".");if(-1!==i)if(n){var s={},o=t.substring(0,i);s[t.substring(i+1)]=c;var u=o.indexOf("(");if(-1===u)n.push({instruction:"UPDATE",target:o,content:s});else{var l=o.substring(u+1,o.length-1);o=o.substring(0,u),n.push({instruction:"UPDATE",target:o,listIndex:parseInt(l,10),content:s})}}else!function(e,t,n){if("string"===typeof t)for(var a=t.split("."),c=e,r=0;r<a.length;r++){var i=a[r],s=i.indexOf("(");if(-1===s)r<a.length-1?"undefined"===typeof c[i]&&(c[i]={}):c[i]=n,c=c[i];else{var o=parseInt(i.substring(s+1,i.length-1));"undefined"===typeof c[i=i.substring(0,s)]&&(c[i]=[]);for(var u=c[i].length;u<o;u++)c[i].push({});c=c[i][o-1]}}}(e,t,c);else e[t]=c}},E=n(1);function w(){var e=Object(o.g)(),t=e.casetypeid,w=e.caseid,A=Object(s.useState)(!1),D=Object(i.a)(A,2),N=D[0],U=D[1],P=Object(s.useState)(),R=Object(i.a)(P,2),F=R[0],L=R[1],q=Object(s.useState)(!0),J=Object(i.a)(q,2),M=J[0],_=J[1],z=Object(s.useState)(""),B=Object(i.a)(z,2),W=B[0],G=B[1],H=Object(s.useState)(""),V=Object(i.a)(H,2),X=V[0],Y=V[1],K=Object(s.useState)("tab-0"),Q=Object(i.a)(K,2),Z=Q[0],$=Q[1],ee=Object(s.useState)([]),te=Object(i.a)(ee,2),ne=te[0],ae=te[1],ce=Object(s.useState)([]),re=Object(i.a)(ce,2),ie=re[0],se=re[1],oe=Object(s.useState)({}),ue=Object(i.a)(oe,2),le=ue[0],fe=ue[1],be=Object(s.useState)(),de=Object(i.a)(be,2),je=de[0],ge=de[1];Object(s.useEffect)((function(){var e=!0;return""!==W&&Object(y.b)("assignments",W).then((function(t){if(e&&t.uiResources){var n=t.uiResources.root.config.name;Y(t.data.caseInfo.content.pyViewName),ge(Object(E.jsx)(C.default,{children:Object(T.a)(t.uiResources.resources.views[n],!1,"",t)}))}})),function(){e=!1}}),[W]);var pe=function(e){var t=e.onSubmit,n=e.onCancel;return Object(E.jsx)(u.a,{actions:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(l.b,{onClick:n,children:"Cancel"}),Object(E.jsx)(l.b,{variant:"primary",onClick:t,children:"Submit"})]}),children:je})},Oe=Object(s.useCallback)((function(e){if(!F||!F.uiResources.resources.views.pyDetails)return[];var t,n=Object(r.a)(F.uiResources.resources.views.pyDetails.children);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.name===e)return a}}catch(c){n.e(c)}finally{n.f()}return[]}),[F]);Object(s.useEffect)((function(){if(F){var e=Oe("Utilities");ae(e.children.map((function(e,a){try{var c=Object(s.lazy)((function(){return n(1058)("./".concat(e.type)).catch((function(e){console.error("An error has occured",e)}))}));return Object(E.jsx)(s.Suspense,{fallback:Object(E.jsx)(f.a,{placement:"local"}),children:Object(E.jsx)(c,{caseid:w,casetypeid:t,utilityCtx:me})},"utility-".concat(a))}catch(r){return Object(E.jsxs)("div",{children:["Utility ",e.type," not found"]},"utility-".concat(a))}})))}}),[F,w,t,Oe]),Object(s.useEffect)((function(){var e="".concat(Object(x.a)(t).toUpperCase(),"%20").concat(w.toUpperCase());e=e.replace("-".concat(t.toUpperCase(),"%20"),"%20"),Object(y.b)("caseview",e).then((function(e){L(e),U(!0)}))}),[w,t]);var me=function(e,t){fe((function(n){return n[e]&&n[e].count===t.count?n:Object(c.a)(Object(c.a)({},n),{},Object(a.a)({},e,t))}))};Object(s.useEffect)((function(){if(F){var e=Oe("Utilities");se(e.children.reduce((function(e,t){var n=t.type;return n&&le[n]&&e.push(le[n]),e}),[]))}}),[le,F,Oe]);var ve=function(){return F.data.caseInfo.assignments.filter((function(e,t){return!M||t<3})).map((function(e,t){return{avatar:Object(E.jsx)(b.b,{name:e.assigneeInfo.name,imageSrc:Object(y.c)("operatorimage",e.assigneeInfo.image)}),name:e.name,meta:Object(E.jsx)(d.a,{items:[Object(E.jsxs)(j.b,{variant:"secondary",children:["Task in ",w]}),Object(E.jsxs)(j.b,{variant:"secondary",children:["Urgency ",e.urgency]})]}),actions:Object(E.jsx)(l.b,{variant:"primary",onClick:function(){G(e.links.open.href)},children:"Go"}),content:""!==W?Object(E.jsx)(pe,{onSubmit:function(e){var t={},n=[];!function(e,t,n,a){var c,i,s=Object(r.a)(e.elements);try{for(s.s();!(c=s.n()).done;){var o=c.value;if("INPUT"===o.tagName||"TEXTAREA"===o.tagName||"SELECT"===o.tagName){var u=o.getAttribute("data-ref");if(null!==u&&"pyID"!==u)if("INPUT"===o.tagName){var l=o.getAttribute("type");if("checkbox"===l)k(t,u,n,a,o.checked);else if("radio"===l)o.checked&&k(t,u,n,a,o.value);else if("tel"===l){var f=o.value;"SELECT"===o.parentNode.firstElementChild.tagName&&"field-countrycode"===o.parentNode.firstElementChild.className&&(f=o.parentNode.firstElementChild.value+f),k(t,u,n,a,f)}else if("date"===l){var b=void 0;o.valueAsDate&&(b=new Date(o.valueAsDate)),b&&b instanceof Date&&b.getTime()===b.getTime()||(b=new Date(o.value)),b&&b instanceof Date&&b.getTime()===b.getTime()?(b=new Date(b.getTime()+6e4*b.getTimezoneOffset()),k(t,u,n,a,"".concat(I(b.getMonth()+1),"/").concat(I(b.getDate()),"/").concat(b.getFullYear()))):k(t,u,n,a,o.value)}else k(t,u,n,a,o.value)}else k(t,u,n,a,o.value)}}}catch(O){s.e(O)}finally{s.f()}if(e&&e.querySelectorAll)for(var d=e.querySelectorAll("[contenteditable]"),j=0;j<d.length;j++){var g=d[j],p=g.getAttribute("data-ref");k(t,p,n,a,(i=g.innerHTML)&&"string"===typeof i?i.replace(/[&<>'"]/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;","(":"&#40;",")":"&#41;",'"':"&quot;"}[e]||e})):"")}}(e.target.closest("form"),t,n,F.data.caseInfo.content),Object(y.d)("assignments",W.substring(1)+"/actions/"+X,JSON.stringify({content:t,pageInstructions:n})).then((function(e){if(e.uiResources){var t=e.uiResources.root.config.name;ge(Object(E.jsx)(C.default,{children:Object(T.a)(e.uiResources.resources.views[t],!1,"",e)})),L((function(t){return Object(c.a)(Object(c.a)({},t),{},{data:e.data})}))}})),G("")},onCancel:function(){G("")}}):null}}))},he=function(e){return F.uiResources.resources.views.pyCaseSummary.children[e].children.map((function(e,t){return Object(S.a)(F,e),{id:"p-".concat(t),name:Object(S.b)(e),value:Object(S.c)(e)}}))};return N?Object(E.jsx)(v.a,{caseId:w,heading:F?F.data.caseInfo.content.pyLabel:"",icon:Object(E.jsx)(p.b,{name:"polaris-solid"}),followed:!1,onFollowedChange:function(){},onEdit:function(){},summary:Object(E.jsx)(h.a,{primaryFields:he(0),secondaryFields:he(1)}),tabs:{items:Oe("Tabs").children.map((function(e,t){var n=e.config.label;return!n&&e.config.inheritedProps&&e.config.inheritedProps.length>0&&(n=e.config.inheritedProps[0]),{name:n="string"===typeof n?n.replace("@L ",""):"",id:"tab-".concat(t)}})),currentTabId:Z,onClick:function(e){return $(e)}},tasks:F.data.caseInfo.assignments?Object(E.jsx)(O.a,{headerText:"Tasks",count:F.data.caseInfo.assignments.length,items:ve(),emptyPlaceholder:Object(E.jsx)(g.b,{}),onExpandToggle:function(){_((function(e){return!e}))}}):null,stages:Object(E.jsx)(m.a,{stages:F.data.caseInfo.stages.map((function(e){return{name:e.name,id:"stage-".concat(e.name),complete:"completed"===e.visited_status}})),current:"stage-".concat(F.data.caseInfo.stageLabel),caseTitle:"Stages"}),actions:F.data.caseInfo.availableActions.map((function(e,t){return{text:e.name,id:"action-".concat(t),onClick:function(){}}})),utilities:ne,utilitiesSummaryItems:ie}):Object(E.jsx)(f.a,{placement:"global"})}}}]);
//# sourceMappingURL=30.12816081.chunk.js.map