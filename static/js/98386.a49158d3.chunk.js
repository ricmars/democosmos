"use strict";(self.webpackChunkdemocosmos=self.webpackChunkdemocosmos||[]).push([[98386,8368,37492],{98386:function(e,n,t){t.r(n),t.d(n,{default:function(){return Me}});var a,r,i=t(1413),c=t(29439),o=t(72791),s=t(12616),l=t(91204),u=t(44925),d=t(80184),p=t(54164),h=t(94342),f=t(80068),m=t(63837),Z=t(2461),v=t(41878),g=t(37260),x=t(15579),b=t(31935),y=t(16245),j=t(24226),w=t(95075),k=t(22479),C=t(53004),P=t(84053),S=t(41970),F=t(91062),M=t(1004),A=t(27132),I=t(37492),L=t(8368),_=t(30168),T=t(16444),D=t(44896),H=t(57993),R=t(36862),z=t(33039),N=t(83494),E=t(24667),G=t(54716),W=T.ZP.article((function(e){var n=e.theme,t=(0,D.MX)(n.base["font-size"],n.base["font-scale"]);return(0,T.iv)(a||(a=(0,_.Z)(["\n    h2 "," {\n      font-size: ",";\n      font-weight: ",";\n    }\n    padding-block-end: calc(2 * ",");\n    border-bottom: 0.0125rem solid ",";\n\n    &:last-of-type {\n      border-bottom: none;\n    }\n  "])),H.u,t.s,n.base["font-weight"].normal,n.base.spacing,n.base.palette["border-line"])}));W.defaultProps=R.ns;var U=(0,T.ZP)(s.Z)(r||(r=(0,_.Z)(["\n  word-break: break-word;\n"]))),O=function(e){var n=e.title,t=e.link,a=e.description,r=e.meta,c=void 0===r?[]:r,o=e.accent;return(0,d.jsxs)(v.Z,{as:W,container:{direction:"column",gap:1},children:[(0,d.jsxs)(v.Z,{container:{direction:"column"},children:[(0,d.jsx)(s.Z,{variant:"h2",children:(0,d.jsx)(z.ZP,(0,i.Z)((0,i.Z)({},t),{},{children:o?(0,N.Z)(n,o,(function(e){return(0,d.jsx)(E.Z,{children:e})})):n}))}),!!c.length&&(0,d.jsx)(G.ZP,{items:c})]}),a&&(0,d.jsx)(U,{forwardedAs:"p",children:a})]})},V=t(28682),q=t(76344),B=(0,o.forwardRef)((function(e,n){return(0,d.jsx)(q.ZP,(0,i.Z)((0,i.Z)({},e),{},{type:"checkbox",ref:n}))}));B.defaultProps=q.ZP.defaultProps;var X,Y,$,J,K,Q,ee,ne,te,ae,re=B,ie=t(34798),ce=t(85477),oe=t(25419),se=t(38637),le=t(35393),ue=T.ZP.div(X||(X=(0,_.Z)(["\n  min-height: inherit;\n"])));ue.defaultProps=R.ns,T.ZP.span((function(e){var n=e.theme.base;return(0,T.iv)(Y||(Y=(0,_.Z)(["\n    padding-bottom: calc(2 * ",");\n  "])),n.spacing)})).defaultProps=R.ns;var de=T.ZP.span((function(e){var n=e.theme.base;return(0,T.iv)($||($=(0,_.Z)(["\n    font-weight: ",";\n  "])),n["font-weight"]["semi-bold"])}));de.defaultProps=R.ns;var pe=T.ZP.div((function(e){var n=e.theme.base.spacing;return(0,T.iv)(J||(J=(0,_.Z)(["\n      margin-top: calc(0.5 * ",");\n      width: calc("," * 50);\n    "])),n,n)}));pe.defaultProps=R.ns;var he=T.ZP.div((function(e){var n=e.theme.base.spacing;return(0,T.iv)(K||(K=(0,_.Z)(["\n      overflow-x: auto;\n      padding-bottom: calc(1 * ",");\n    "])),n)}));he.defaultProps=R.ns;var fe=T.ZP.div(Q||(Q=(0,_.Z)([""])));fe.defaultProps=R.ns;var me=(0,T.ZP)(g.ZP)((function(e){var n=e.theme.base,t=(0,D.MX)(n["font-size"],n["font-scale"]),a=(0,se.Z)().rtl;return(0,T.iv)(ee||(ee=(0,_.Z)(["\n    display: inline-flex;\n    font-size: ",";\n\n    "," {\n      height: 1em;\n      width: 1em;\n      transition: transform "," ",";\n    }\n\n    &[aria-expanded='true'] "," {\n      transform: rotate(0);\n    }\n\n    &[aria-expanded='false'] "," {\n      transform: rotate(calc("," * 90deg));\n    }\n  "])),t.xl,h.xL,n.animation.speed,n.animation.timing.ease,h.xL,h.xL,a?"1":"-1")}));me.defaultProps=R.ns;var Ze=T.ZP.div((function(e){var n=e.theme.base.spacing;return(0,T.iv)(ne||(ne=(0,_.Z)(["\n    column-gap: calc("," * 1);\n\n    + "," {\n      margin-block-start: calc("," * 1);\n    }\n  "])),n,le.GB,n)}));Ze.defaultProps=R.ns;var ve=T.ZP.div((function(e){var n=e.theme;return(0,T.iv)(te||(te=(0,_.Z)(["\n    position: sticky;\n    top: var(--appshell-offset, 0);\n    max-height: calc(100vh - var(--appshell-offset, 0rem));\n    overflow: auto;\n    > ",", "," {\n      border-bottom: 0.0125rem solid ",";\n      padding: calc("," * 2);\n    }\n  "])),fe,Ze,n.base.palette["border-line"],n.base.spacing)}));ve.defaultProps=R.ns;var ge=T.ZP.div((function(e){var n=e.theme;return(0,T.iv)(ae||(ae=(0,_.Z)(["\n    background-color: ",";\n    padding: calc("," * 2);\n    position: relative;\n    min-height: calc(100vh - var(--appshell-offset, 0rem));\n  "])),n.base.palette["primary-background"],n.base.spacing)}));ge.defaultProps=R.ns;var xe=["onFilterChange","onClearFilter","name","expanded"];(0,h.q5)(oe);var be=function(e){var n,t=e.onFilterChange,a=e.onClearFilter,r=e.name,l=e.expanded,p=void 0===l||l,m=(0,u.Z)(e,xe),Z=(0,f.Z)(),x=(0,o.useState)(p),b=(0,c.Z)(x,2),y=b[0],j=b[1],w=!1;if("select"===m.type){var k=m.selectType,C=m.items,P=V.Z,S=re;"single-select"===k&&(P=V.Z,S=ie.Z),n=(0,d.jsx)(P,{label:r,labelHidden:!0,onChange:function(e){var n=C.find((function(n){return n.id===e.target.id}));if(n){var a=(0,i.Z)((0,i.Z)({},n),{},{checked:!n.checked});null===t||void 0===t||t({name:r,type:m.type,value:a})}},children:m.items.map((function(e){return e.checked&&(w=!0),(0,d.jsx)(S,{id:e.id,name:e.name,label:e.label,checked:e.checked},e.id)}))})}else n=null;return(0,d.jsxs)(fe,{children:[(0,d.jsxs)(v.Z,{container:{justify:"between"},children:[(0,d.jsxs)(v.Z,{as:me,container:{gap:1,alignItems:"center"},variant:"text",onClick:function(){return j((function(e){return!e}))},"aria-expanded":y,"aria-label":Z(y?"collapse_noun":"expand_noun",[r]),children:[(0,d.jsx)(h.ZP,{name:"caret-down"}),(0,d.jsx)(s.Z,{variant:"h3",as:"span",children:r})]}),w&&(0,d.jsx)(g.ZP,{variant:"link",onClick:function(){return null===a||void 0===a?void 0:a(r)},children:Z("clear")})]}),(0,d.jsx)(ce.Z,{collapsed:!y,children:n})]})},ye=["results","searchInputProps","count","filters","onFilterChange","onClearAllFilters","onClearFilter","onShowMore","loading"];(0,h.q5)(I,L);var je=function(e){var n=e.activeFilters,t=e.count,a=e.filters,r=e.onFilterChange,c=e.onClearFilter,o=e.onClearAllFilters,l=(0,f.Z)();return(0,d.jsx)(m.Z,{heading:l("filters"),autoWidth:!0,children:(0,d.jsxs)(Z.Z,{as:pe,container:{rowGap:2},children:[(0,d.jsxs)(v.Z,{container:{gap:1,alignItems:"center"},children:[(0,d.jsx)(s.Z,{as:de,variant:"secondary",children:l("results_count",[t],{count:t})}),o&&!!n.length&&(0,d.jsx)(g.ZP,{variant:"link",onClick:o,children:l("clear_all")})]}),!!n.length&&(0,d.jsx)(v.Z,{as:he,container:{gap:1},children:n.map((function(e){return(0,d.jsx)(x.C,{id:e.id,onRemove:function(){return null===r||void 0===r?void 0:r({name:e.groupName,type:e.type,value:e.resetValue})},children:"".concat(e.groupName,": ").concat(e.name)},e.id)}))}),(0,d.jsx)("div",{children:a.map((function(e){return(0,d.jsx)(be,(0,i.Z)({onFilterChange:r,onClearFilter:c},e),e.name)}))})]})})},we=(0,o.forwardRef)((function(e,n){var t=e.results,a=e.searchInputProps,r=e.count,l=e.filters,m=e.onFilterChange,I=e.onClearAllFilters,L=e.onClearFilter,_=e.onShowMore,T=e.loading,D=void 0!==T&&T,H=(0,u.Z)(e,ye),R=(0,f.Z)(),z=(0,b.Z)("md"),N=(0,y.Z)().create,E=(0,o.useContext)(j.Z).searchContainerEl,G=(0,o.useRef)(),W=a.placeholder,U=void 0===W?R("search_placeholder_default"):W,V=(0,w.Z)().base.palette["brand-primary"],q=(0,o.useState)(),B=(0,c.Z)(q,2),X=B[0],Y=B[1],$=(0,o.useState)(a.value),J=(0,c.Z)($,2),K=J[0],Q=J[1],ee=l.flatMap((function(e){return"select"===e.type?e.items.flatMap((function(n){return n.checked?{id:n.id,name:n.name,resetValue:(0,i.Z)((0,i.Z)({},n),{},{checked:!1}),groupName:e.name,type:e.type}:[]})):[]}));(0,k.Z)((function(){G.current&&G.current.update({activeFilters:ee,count:r,filters:l})}),[ee,r,l]),(0,k.Z)((function(){z&&G.current&&G.current.dismiss()}),[z]),(0,k.Z)((function(){Y(K?new RegExp(K,"gi"):void 0)}),[K]);var ne=(0,d.jsx)(C.ZP,{as:Ze,visual:(0,d.jsx)(P.ZP,{icon:"search",name:"search",shape:"squircle",backgroundColor:V,color:"white"}),primary:(0,d.jsx)(s.Z,{variant:"h1",children:"Search"}),actions:I&&z&&!!ee.length&&(0,d.jsx)(g.ZP,{variant:"link",onClick:I,children:R("clear_all")})}),te=(0,d.jsx)(S.Z,(0,i.Z)((0,i.Z)({},a),{},{onSearchSubmit:function(e){var n;null===(n=a.onSearchSubmit)||void 0===n||n.call(a,e),Q(e)},placeholder:U}));return(0,d.jsxs)(Z.Z,(0,i.Z)((0,i.Z)({},H),{},{as:ue,ref:n,md:l.length?{container:{cols:"15rem auto"}}:void 0,sm:l.length?{container:{cols:"auto",rowGap:2}}:void 0,container:{rows:"auto auto",cols:"auto 1fr",areas:'"filters results"'},children:[z&&!!l.length&&(0,d.jsxs)(Z.Z,{item:{area:"filters",alignSelf:"start"},as:ve,children:[ne,l.map((function(e){return(0,d.jsx)(be,(0,i.Z)({onFilterChange:m,onClearFilter:L},e),e.name)}))]}),(0,d.jsxs)(Z.Z,{item:{alignSelf:"start",area:"results"},container:{alignItems:"center",rowGap:2,rows:"auto auto 1fr",areas:'"search" "meta" "items"'},as:ge,children:[D&&(0,d.jsx)(F.Z,{placement:"local"}),E&&z?(0,p.createPortal)(te,E):(0,d.jsxs)(Z.Z,{item:{area:"search"},children:[!z&&ne,te]}),(0,d.jsxs)(Z.Z,{item:{area:"meta"},container:{rowGap:1},children:[(0,d.jsxs)(v.Z,{container:{justify:"between",alignItems:"center"},children:[!D&&(0,d.jsx)(s.Z,{as:de,variant:"secondary",children:""!==K||t.length>0?R("results_count",[r],{count:r}):""}),!z&&!!l.length&&(0,d.jsxs)(g.ZP,{variant:"simple",onClick:function(){G.current=N(je,{activeFilters:ee,count:r,filters:l,onFilterChange:m,onClearFilter:L,onClearAllFilters:I})},children:[(0,d.jsx)(h.ZP,{name:ee.length>0?"filter-on":"filter"}),"\xa0",R("filters"),"\xa0",(0,d.jsx)(M.Z,{children:ee.length})]})]}),!!ee.length&&(0,d.jsx)(v.Z,{as:he,container:{gap:1,wrap:"wrap"},children:ee.map((function(e){return(0,d.jsx)(x.C,{id:e.id,onRemove:function(){return null===m||void 0===m?void 0:m({name:e.groupName,type:e.type,value:e.resetValue})},children:"".concat(e.groupName,": ").concat(e.name)},e.id)}))})]}),(0,d.jsx)(Z.Z,{item:{area:"items",alignSelf:t.length?"start":"stretch"},container:{rowGap:2},children:!D&&(0,d.jsxs)(d.Fragment,{children:[t.length?t.map((function(e){return(0,d.jsx)(O,(0,i.Z)((0,i.Z)({},e),{},{accent:X}),e.id)})):(0,d.jsx)(Z.Z,{item:{alignSelf:"stretch"},children:(0,d.jsx)(A.Z,{message:""===K?R("empty_search"):void 0})}),_&&(0,d.jsx)(v.Z,{container:{justify:"center"},children:(0,d.jsx)(g.ZP,{variant:"link",onClick:_,children:R("show_more")})})]})})]})]}))})),ke=t(49010),Ce=t(12789),Pe="single-select",Se=function(e,n){return e.map((function(e){return{id:e,label:"status"===n?(0,Ce.D)(e):e,checked:!1,name:e}}))},Fe=[{type:"select",id:"status",name:"Status",items:Se(["blocked","pending","new","open","resolved"],"status")},{type:"select",selectType:Pe,id:"type-of-work",name:"Type of work",items:Se(["All unresolved work","Work last entered by me","Work last updated by me"])},{type:"select",selectType:Pe,id:"last-updated",name:"Last updated",items:Se(["Last 90 days","Last 30 days","Last 7 days","Yesterday","Today"])}],Me=function(){var e="";window.searchString&&(e=window.searchString);var n=(0,o.useState)([]),t=(0,c.Z)(n,2),a=t[0],r=t[1],u=(0,o.useState)(e),p=(0,c.Z)(u,2),h=p[0],f=p[1],m=(0,o.useState)(function(){var e=[].concat(Fe);if(window.portal){var n=window.portal.data.pyPortal.pyCaseTypesAvailableToCreate;e.unshift({type:"select",id:"case-type",name:"Case type",items:n.map((function(e){return{id:e.pyClassName,label:e.pyLabel,checked:!1,name:e.pyLabel}}))})}return e}()),Z=(0,c.Z)(m,2),v=Z[0],g=Z[1],x=(0,o.useState)(30),b=(0,c.Z)(x,2),y=b[0],j=b[1];(0,o.useEffect)((function(){if(h&&""!==h){var e=h.replace(/['"]+/g,"");window.searchString=e;var n="All work",t="Anytime",a=[],i=[];v.forEach((function(e){e.items.forEach((function(r){if(r.checked)switch(e.id){case"status":i.push(r.id);break;case"type-of-work":n=r.id;break;case"last-updated":t=r.id;break;case"case-type":a.push(r.id)}}))})),(0,ke.$S)("dataviews","D_pySearch",'{"dataViewParameters":[{"SearchString":"'.concat(encodeURIComponent(e),'"},{"TypeOfWork":"').concat(n,'"},{"UpdatedOn":"').concat(t,'"},{"pyMaxResults":"').concat("500",'"}]}')).then((function(e){null!==e.data?r(e.data.reduce((function(e,n){var t=function(e,n){var t=[],a=e.pzWorkStatus?e.pzWorkStatus.toUpperCase():"";return n.length>0&&0===n.filter((function(e){return 0===a.indexOf(e.toUpperCase())})).length?null:(""!==a&&t.push((0,Ce.D)(a)),t.push((0,d.jsxs)(s.Z,{children:["Updated on"," ",(0,d.jsx)(l.Z,{value:new Date(e.pxCreateDateTime),variant:"date",format:"short"})]})),t.push((0,d.jsxs)(s.Z,{children:["Created by ",e.pxCreateOpName]})),{id:e.pyID,title:e.pyLabel,link:{href:"/case/".concat(e.pzCategory,"/").concat(e.pyID)},meta:t,description:e.pyDescription})}(n,i);return null!==t&&e.push(t),e}),[])):r([])})).catch((function(e){console.log(e),r([])}))}}),[h,v]);return(0,d.jsx)(we,{results:y<a.length?a.slice(0,y):a,searchInputProps:{value:h,onSearchSubmit:function(e){f(e)},searchInputAriaLabel:"Enter a search"},count:a.length,filters:v,onFilterChange:function(e){g((function(n){return n.map((function(n){var t=(0,i.Z)({},n);return t.name===e.name&&"select"===e.type&&"select"===t.type&&(t.items=t.items.map((function(n){var a=(0,i.Z)({},n);return n.id===e.value.id?a.checked=e.value.checked:t.selectType===Pe&&(a.checked=!1),a}))),t}))}))},onClearAllFilters:function(){g((function(e){return e.map((function(e){return"select"===e.type&&(e.items=e.items.map((function(e){return e.checked=!1,e}))),e}))}))},onClearFilter:function(e){g((function(n){return n.map((function(n){return n.name===e&&"select"===n.type&&(n.items=n.items.map((function(e){return e.checked=!1,e}))),n}))}))},onShowMore:y<a.length?function(){y<a.length&&j((function(e){return e+30}))}:void 0})}},8368:function(e,n,t){t.r(n),t.d(n,{Component:function(){return c},name:function(){return i},set:function(){return r},viewBox:function(){return o}});var a=t(80184),r="budicon",i="filter-on",c=function(){return(0,a.jsx)("path",{d:"M10.81 19.603h1.904c.667 0 1 .324 1 .925 0 .648-.333.972-1 .972H10.81c-.667 0-1-.324-1-.972 0-.601.333-.925 1-.925Zm-3.905-4.72h9.714c.667 0 1 .324 1 .925 0 .648-.333.972-1 .972H6.905c-.667 0-1-.324-1-.972 0-.601.333-.925 1-.925Zm-2.048-4.72h10.429c.571 0 .856.323.856.971 0 .602-.285.926-.856.926H4.857c-.619 0-.905-.324-.905-.926 0-.648.286-.971.905-.971Zm8.857-3.795c0 .601-.286.925-.81.925H2.81c-.524 0-.81-.323-.81-.925 0-.648.286-.972.81-.972h10.095c.523 0 .81.324.81.972ZM23 6.83c0 .88-.333 1.666-1 2.314-.714.648-1.524.971-2.428.971-.952 0-1.762-.323-2.428-.971-.667-.648-1-1.434-1-2.314 0-.925.333-1.712 1-2.36.666-.647 1.476-.971 2.428-.971.905 0 1.714.324 2.428.972.667.647 1 1.434 1 2.36Z"})},o="0 0 25 25"},37492:function(e,n,t){t.r(n),t.d(n,{Component:function(){return c},name:function(){return i},set:function(){return r},viewBox:function(){return o}});var a=t(80184),r="budicon",i="filter",c=function(){return(0,a.jsx)("path",{d:"M11.573 18.615h1.853c.65 0 .973.322.973.92 0 .643-.324.965-.973.965h-1.853c-.649 0-.973-.322-.973-.965 0-.598.324-.92.973-.92Zm-3.8-4.69h9.454c.648 0 .973.322.973.92 0 .643-.325.965-.973.965H7.772c-.648 0-.972-.322-.972-.965 0-.598.324-.92.972-.92ZM5.871 9.19h13.255c.648 0 .972.322.972.965 0 .598-.324.92-.972.92H5.872c-.649 0-.973-.322-.973-.92 0-.643.324-.965.973-.965ZM22 5.465c0 .598-.324.92-.973.92H3.973c-.649 0-.973-.322-.973-.92 0-.643.324-.965.973-.965h17.054c.649 0 .973.322.973.965Z"})},o="0 0 25 25"}}]);
//# sourceMappingURL=98386.a49158d3.chunk.js.map