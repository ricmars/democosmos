(this.webpackJsonpdemoapp2p=this.webpackJsonpdemoapp2p||[]).push([[31],{1074:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a(5),r=a(0),s=a(33),i=a(156),o=a(1078),u=a(49),p=a(126),l=a(1),d="single-select",f=function(e,t){return e.map((function(e){return{id:e,label:"status"===t?Object(p.a)(e):e,checked:!1,name:e}}))},h=[{type:"select",id:"status",name:"Status",items:f(["blocked","pending","new","open","resolved"],"status")},{type:"select",selectType:d,id:"type-of-work",name:"Type of work",items:f(["All unresolved work","Work last entered by me","Work last updated by me"])},{type:"select",selectType:d,id:"last-updated",name:"Last updated",items:f(["Last 90 days","Last 30 days","Last 7 days","Yesterday","Today"])}];t.default=function(){var e="";window.searchString&&(e=window.searchString);var t=Object(r.useState)([]),a=Object(c.a)(t,2),f=a[0],m=a[1],y=Object(r.useState)(e),b=Object(c.a)(y,2),k=b[0],w=b[1],j=Object(r.useState)(function(){var e=[].concat(h);if(window.portal){var t=window.portal.data.pyPortal.pyCaseTypesAvailableToCreate;e.unshift({type:"select",id:"case-type",name:"Case type",items:t.map((function(e){return{id:e.pyClassName,label:e.pyLabel,checked:!1,name:e.pyLabel}}))})}return e}()),O=Object(c.a)(j,2),v=O[0],g=O[1],S=Object(r.useState)(30),C=Object(c.a)(S,2),T=C[0],x=C[1];Object(r.useEffect)((function(){if(k&&""!==k){var e=k.replace(/['"]+/g,"");window.searchString=e;var t="All work",a="Anytime",n=[],c=[];v.forEach((function(e){e.items.forEach((function(r){if(r.checked)switch(e.id){case"status":c.push(r.id);break;case"type-of-work":t=r.id;break;case"last-updated":a=r.id;break;case"case-type":n.push(r.id)}}))})),Object(u.d)("dataviews","D_pySearch",'{"dataViewParameters":[{"SearchString":"'.concat(encodeURIComponent(e),'"},{"TypeOfWork":"').concat(t,'"},{"UpdatedOn":"').concat(a,'"},{"pyMaxResults":"').concat("500",'"}]}')).then((function(e){null!==e.data?m(e.data.reduce((function(e,t){var a=function(e,t){var a=[],n=e.pzWorkStatus?e.pzWorkStatus.toUpperCase():"";return t.length>0&&0===t.filter((function(e){return 0===n.indexOf(e.toUpperCase())})).length?null:(""!==n&&a.push(Object(p.a)(n)),a.push(Object(l.jsxs)(s.b,{children:["Updated on"," ",Object(l.jsx)(i.a,{value:new Date(e.pxCreateDateTime),variant:"date",format:"short"})]})),a.push(Object(l.jsxs)(s.b,{children:["Created by ",e.pxCreateOpName]})),{id:e.pyID,title:e.pyLabel,link:{href:"/case/".concat(e.pzCategory,"/").concat(e.pyID)},meta:a,description:e.pyDescription})}(t,c);return null!==a&&e.push(a),e}),[])):m([])})).catch((function(e){console.log(e),m([])}))}}),[k,v]);return Object(l.jsx)(o.a,{results:T<f.length?f.slice(0,T):f,searchInputProps:{value:k,onSearchSubmit:function(e){w(e)},searchInputAriaLabel:"Enter a search"},count:f.length,filters:v,onFilterChange:function(e){g((function(t){return t.map((function(t){var a=Object(n.a)({},t);return a.name===e.name&&"select"===e.type&&"select"===a.type&&(a.items=a.items.map((function(t){var c=Object(n.a)({},t);return t.id===e.value.id?c.checked=e.value.checked:a.selectType===d&&(c.checked=!1),c}))),a}))}))},onClearAllFilters:function(){g((function(e){return e.map((function(e){return"select"===e.type&&(e.items=e.items.map((function(e){return e.checked=!1,e}))),e}))}))},onClearFilter:function(e){g((function(t){return t.map((function(t){return t.name===e&&"select"===t.type&&(t.items=t.items.map((function(e){return e.checked=!1,e}))),t}))}))},onShowMore:T<f.length?function(){T<f.length&&x((function(e){return e+30}))}:void 0})}}}]);
//# sourceMappingURL=31.519f2554.chunk.js.map