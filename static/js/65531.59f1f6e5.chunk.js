(self.webpackChunkdemoapp2p=self.webpackChunkdemoapp2p||[]).push([[65531],{65531:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var a=n(4942),r=n(1413),i=n(37762),s=n(70885),o=n(72791),c=n(16871),u=n(80758),l=n(37260),f=n(70158),d=n(84053),g=n(91003),p=n(12616),m=n(27132),v=n(64183),h=n(4016),y=n(72173),x=n(11554),Z=n(84900),b=n(49010),S=n(75613),T=n(43420),k=n(77047),C=n(86348),j=function(e){return"0".concat(e).slice(-2)},I=function(e,t,n,a,r){if("string"===typeof t){if(a){var i=function(e,t){if("string"!==typeof t)return null;var n=e,a=t.split(".");for(var r in a){var i=a[r],s=i.indexOf("(");if(-1===s){if("undefined"===typeof n[i])return null;n=n[i]}else{var o=parseInt(i.substring(s+1,i.length-1),10),c=n[i.substring(0,s)];if(!(c&&Array.isArray(c)&&c.length>=o))return null;n=c[o-1]}}return n}(a,t);if(i===r||"".concat(i)==="".concat(r)||null===i&&""===r)return}var s=t.lastIndexOf(".");if(-1!==s)if(n){var o={},c=t.substring(0,s);o[t.substring(s+1)]=r;var u=c.indexOf("(");if(-1===u)n.push({instruction:"UPDATE",target:c,content:o});else{var l=c.substring(u+1,c.length-1);c=c.substring(0,u),n.push({instruction:"UPDATE",target:c,listIndex:parseInt(l,10),content:o})}}else!function(e,t,n){if("string"===typeof t)for(var a=t.split("."),r=e,i=0;i<a.length;i++){var s=a[i],o=s.indexOf("(");if(-1===o)i<a.length-1?"undefined"===typeof r[s]&&(r[s]={}):r[s]=n,r=r[s];else{var c=parseInt(s.substring(o+1,s.length-1));"undefined"===typeof r[s=s.substring(0,o)]&&(r[s]=[]);for(var u=r[s].length;u<c;u++)r[s].push({});r=r[s][c-1]}}}(e,t,r);else e[t]=r}},E=n(80184);function w(){var e=(0,c.UO)(),t=e.casetypeid,w=e.caseid,P=(0,o.useState)(!1),U=(0,s.Z)(P,2),A=U[0],D=U[1],N=(0,o.useState)(),R=(0,s.Z)(N,2),O=R[0],F=R[1],L=(0,o.useState)(!0),q=(0,s.Z)(L,2),z=q[0],M=q[1],W=(0,o.useState)(""),_=(0,s.Z)(W,2),B=_[0],Q=_[1],$=(0,o.useState)(""),G=(0,s.Z)($,2),H=G[0],J=G[1],V=(0,o.useState)("tab-0"),X=(0,s.Z)(V,2),Y=X[0],K=X[1],ee=(0,o.useState)([]),te=(0,s.Z)(ee,2),ne=te[0],ae=te[1],re=(0,o.useState)([]),ie=(0,s.Z)(re,2),se=ie[0],oe=ie[1],ce=(0,o.useState)({}),ue=(0,s.Z)(ce,2),le=ue[0],fe=ue[1],de=(0,o.useState)(),ge=(0,s.Z)(de,2),pe=ge[0],me=ge[1];(0,o.useEffect)((function(){var e=!0;return""!==B&&(0,b.rQ)("assignments",B).then((function(t){if(e&&t.uiResources){var n=t.uiResources.root.config.name;J(t.data.caseInfo.content.pyViewName),me((0,E.jsx)(C.default,{children:(0,k.e)(t.uiResources.resources.views[n],!1,"",t)}))}})),function(){e=!1}}),[B]);var ve=function(e){var t=e.onSubmit,n=e.onCancel;return(0,E.jsx)(u.ZP,{actions:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(l.Z,{onClick:n,children:"Cancel"}),(0,E.jsx)(l.Z,{variant:"primary",onClick:t,children:"Submit"})]}),children:pe})},he=(0,o.useCallback)((function(e){if(!O||!O.uiResources.resources.views.pyDetails)return[];var t,n=(0,i.Z)(O.uiResources.resources.views.pyDetails.children);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.name===e)return a}}catch(r){n.e(r)}finally{n.f()}return[]}),[O]);(0,o.useEffect)((function(){if(O){var e=he("Utilities");ae(e.children.map((function(e,a){try{var r=(0,o.lazy)((function(){return n(61413)("./".concat(e.type)).catch((function(e){console.error("An error has occured",e)}))}));return(0,E.jsx)(o.Suspense,{fallback:(0,E.jsx)(f.Z,{placement:"local"}),children:(0,E.jsx)(r,{caseid:w,casetypeid:t,utilityCtx:ye})},"utility-".concat(a))}catch(i){return(0,E.jsxs)("div",{children:["Utility ",e.type," not found"]},"utility-".concat(a))}})))}}),[O,w,t,he]),(0,o.useEffect)((function(){var e="".concat((0,S.iZ)(t).toUpperCase(),"%20").concat(w.toUpperCase());e=e.replace("-".concat(t.toUpperCase(),"%20"),"%20"),(0,b.rQ)("caseview",e).then((function(e){F(e),D(!0)}))}),[w,t]);var ye=function(e,t){fe((function(n){return n[e]&&n[e].count===t.count?n:(0,r.Z)((0,r.Z)({},n),{},(0,a.Z)({},e,t))}))};(0,o.useEffect)((function(){if(O){var e=he("Utilities");oe(e.children.reduce((function(e,t){var n=t.type;return n&&le[n]&&e.push(le[n]),e}),[]))}}),[le,O,he]);var xe=function(){return O.data.caseInfo.assignments.filter((function(e,t){return!z||t<3})).map((function(e,t){return{avatar:(0,E.jsx)(d.ZP,{name:e.assigneeInfo.name,imageSrc:(0,b.$k)("operatorimage",e.assigneeInfo.image)}),name:e.name,meta:(0,E.jsx)(g.ZP,{items:[(0,E.jsxs)(p.Z,{variant:"secondary",children:["Task in ",w]}),(0,E.jsxs)(p.Z,{variant:"secondary",children:["Urgency ",e.urgency]})]}),actions:(0,E.jsx)(l.Z,{variant:"primary",onClick:function(){Q(e.links.open.href)},children:"Go"}),content:""!==B?(0,E.jsx)(ve,{onSubmit:function(e){var t={},n=[];!function(e,t,n,a){var r,s,o=(0,i.Z)(e.elements);try{for(o.s();!(r=o.n()).done;){var c=r.value;if("INPUT"===c.tagName||"TEXTAREA"===c.tagName||"SELECT"===c.tagName){var u=c.getAttribute("data-ref");if(null!==u&&"pyID"!==u)if("INPUT"===c.tagName){var l=c.getAttribute("type");if("checkbox"===l)I(t,u,n,a,c.checked);else if("radio"===l)c.checked&&I(t,u,n,a,c.value);else if("tel"===l){var f=c.value;"SELECT"===c.parentNode.firstElementChild.tagName&&"field-countrycode"===c.parentNode.firstElementChild.className&&(f=c.parentNode.firstElementChild.value+f),I(t,u,n,a,f)}else if("date"===l){var d=void 0;c.valueAsDate&&(d=new Date(c.valueAsDate)),d&&d instanceof Date&&d.getTime()===d.getTime()||(d=new Date(c.value)),d&&d instanceof Date&&d.getTime()===d.getTime()?(d=new Date(d.getTime()+6e4*d.getTimezoneOffset()),I(t,u,n,a,"".concat(j(d.getMonth()+1),"/").concat(j(d.getDate()),"/").concat(d.getFullYear()))):I(t,u,n,a,c.value)}else I(t,u,n,a,c.value)}else I(t,u,n,a,c.value)}}}catch(h){o.e(h)}finally{o.f()}if(e&&e.querySelectorAll)for(var g=e.querySelectorAll("[contenteditable]"),p=0;p<g.length;p++){var m=g[p],v=m.getAttribute("data-ref");I(t,v,n,a,(s=m.innerHTML)&&"string"===typeof s?s.replace(/[&<>'"]/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;","(":"&#40;",")":"&#41;",'"':"&quot;"}[e]||e})):"")}}(e.target.closest("form"),t,n,O.data.caseInfo.content),(0,b.$S)("assignments",B.substring(1)+"/actions/"+H,JSON.stringify({content:t,pageInstructions:n})).then((function(e){if(e.uiResources){var t=e.uiResources.root.config.name;me((0,E.jsx)(C.default,{children:(0,k.e)(e.uiResources.resources.views[t],!1,"",e)})),F((function(t){return(0,r.Z)((0,r.Z)({},t),{},{data:e.data})}))}})),Q("")},onCancel:function(){Q("")}}):null}}))},Ze=function(e){return O.uiResources.resources.views.pyCaseSummary.children[e].children.map((function(e,t){return(0,T.rz)(O,e),{id:"p-".concat(t),name:(0,T.Te)(e),value:(0,T.hW)(e)}}))};return A?(0,E.jsx)(x.Z,{caseId:w,heading:O?O.data.caseInfo.content.pyLabel:"",icon:(0,E.jsx)(v.ZP,{name:"polaris-solid"}),followed:!1,onFollowedChange:function(){},onEdit:function(){},summary:(0,E.jsx)(Z.Z,{primaryFields:Ze(0),secondaryFields:Ze(1)}),tabs:{items:he("Tabs").children.map((function(e,t){var n=e.config.label;return!n&&e.config.inheritedProps&&e.config.inheritedProps.length>0&&(n=e.config.inheritedProps[0]),{name:n="string"===typeof n?n.replace("@L ",""):"",id:"tab-".concat(t)}})),currentTabId:Y,onClick:function(e){return K(e)}},tasks:O.data.caseInfo.assignments?(0,E.jsx)(h.Z,{headerText:"Tasks",count:O.data.caseInfo.assignments.length,items:xe(),emptyPlaceholder:(0,E.jsx)(m.Z,{}),onExpandToggle:function(){M((function(e){return!e}))}}):null,stages:(0,E.jsx)(y.Z,{stages:O.data.caseInfo.stages.map((function(e){return{name:e.name,id:"stage-".concat(e.name),complete:"completed"===e.visited_status}})),current:"stage-".concat(O.data.caseInfo.stageLabel),caseTitle:"Stages"}),actions:O.data.caseInfo.availableActions.map((function(e,t){return{text:e.name,id:"action-".concat(t),onClick:function(){}}})),utilities:ne,utilitiesSummaryItems:se}):(0,E.jsx)(f.Z,{placement:"global"})}},61413:function(e,t,n){var a={"./ErrorBoundary":[86348],"./ErrorBoundary.tsx":[86348],"./FileUtility":[39872,39872],"./FileUtility.tsx":[39872,39872],"./Followers":[68497,68497],"./Followers.tsx":[68497,68497],"./Pulse":[89156,35302,89156],"./Pulse.tsx":[89156,35302,89156],"./RelatedCases":[71029,71029],"./RelatedCases.tsx":[71029,71029],"./Stakeholders":[95751,16205,55868,95751],"./Stakeholders.tsx":[95751,16205,55868,95751],"./Tags":[94634,94634],"./Tags.tsx":[94634,94634],"./Worklist":[41903,55278],"./Worklist.tsx":[41903,55278]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=61413,e.exports=r}}]);
//# sourceMappingURL=65531.59f1f6e5.chunk.js.map